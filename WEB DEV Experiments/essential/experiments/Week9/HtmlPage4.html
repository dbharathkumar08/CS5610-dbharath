<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Movie Database</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.css" />
    <script src="../js/bootstrap.js"></script>
    <link rel="stylesheet" href="../css/Week9/StyleSheet4.css" />
    <link rel="stylesheet" type="text/css" href="../../css/Week4/StyleSheet.css" />
    <script src="../js/angular.min.js"></script>
    <script src="../js/angular-route.min.js"></script>
    <script src="../js/Week9/JavaScript4.js"></script>
</head>

    <body class="container" ng-app="APIApp">
        <h1>Movie Database</h1>
        <hr />

        <h2>Descrption</h2>
        <hr />
        <p>
            This experiment involves usage of APIs that is used by my project inorder to fetch data .
            Here I fetch all the categories that can be fetched from the WEB API.
            I try to fetch all the movies in a particular genre and display its POSTER upon the click. and also the movie details.
            The display is ina broad spectrum
        </p>

        <h2>Experiment Demo</h2>
        <hr />

        <div ng-controller="APICtrl">

            <div class="row" ng-repeat="genre in genres">
                <div class="row">
                    <button class="btn subtitle" ng-click="fetchTitles(genre.id)">{{genre.name}}</button>
                </div>
                <div class="row">
                    <div class="col-md-2 borderedbox" ng-show="postersByGenreId[genre.id]" ng-repeat="poster in postersByGenreId[genre.id]">
                        <img class="poster" ng-src="{{ poster }}" />
                    </div>
                </div>
            </div>
        </div>
        <h4>Code Snippet</h4>
        <p>Code Below is the angular JS code that acts as a controller</p>
        <pre>
                       var fetchPosters = function () {
        //for each genreId.arrayofmovieresults, extract posterid, form posterurl and set in postersarray
        for (var genreId in $scope.moviesByGenreId) {
            var array = $scope.moviesByGenreId[genreId];
            $scope.postersByGenreId[genreId] = [];
            for (var i = 0; i &lt; array.length; i++) {
                var posterURL = &apos;http://image.tmdb.org/t/p/w500/&apos; + array[i].poster_path + &apos;?api_key=9f8133856d865923b1fdce653c15f5c3&apos;;
                console.log(posterURL);
                $scope.postersByGenreId[genreId].push(posterURL);
            }
        }
    }
    $scope.fetchMovieInfo = function (id) {
        $http.get(&apos;http://api.themoviedb.org/3/movie/&apos; + id + &apos;?api_key=9f8133856d865923b1fdce653c15f5c3&apos;)
          .success(function (response) {
              console.log(response);
              $scope.overview = response.overview;
              // $scope.poster = &apos;http://image.tmdb.org/t/p/w500/&apos; + response.poster_path + &apos;?api_key=9f8133856d865923b1fdce653c15f5c3&apos;;
          });
    }
</pre>
        <h4>Source Code </h4>
        <a href="../../fileview/Default.aspx?~/experiments/Week9/HtmlPage4.html" target="_blank">View Source</a>
        <a href="../../fileview/Default.aspx?~/experiments/js/Week9/JavaScript4.js" target="_blank">Angular JS</a>
        <a href="../../fileview/Default.aspx?~/experiments/css/Week9/StyleSheet4.css" target="_blank">
            View CSS
        </a>

        <h4>References</h4>
        <h5>The Movie DB</h5>
        <a href="https://www.themoviedb.org/documentation/api">The Movie DB APIs</a>
        <hr />
    </body>
</html>
